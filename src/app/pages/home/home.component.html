<a routerLink="/pedido" class="btn btn-primary">
	<i class="icon ion-plus-round"></i>
	Nuevo Pedido
</a>

<div>
	<table class="table table-hover">
		<thead>
			<tr>
				<th scope="col">#</th>
				<th scope="col">Creaci√≥n</th>
				<th scope="col">Total</th>
				<th scope="col">Items</th>
				<th scope="col">Usuario</th>
				<th scope="col">Acciones</th>
			</tr>
		</thead>
		<tbody>
			<tr *ngFor="let item of pedidos">
				<td scope="row">{{item._id}}</td>
				<td scope="row">{{item.creado | date:'yyyy/MM/dd'}}</td>
				<td>{{item.total | currency}}</td>
				<td>
					<a href="" (click)="pedido = item" data-toggle="modal" data-target="#detalleModal">{{item.detalles.length}}</a>
				</td>
				<td>
					<a href="" (click)="pedido = item" data-toggle="modal" data-target="#usuarioModal">{{item.user.nombre+' '+item.user.apellido}}</a>
				</td>
				<td>
					<button type="button" class="btn btn-primary">
						<i class="icon ion-edit"></i>
					</button>
					<button type="button" class="btn btn-primary">
						<i class="icon ion-close-round"></i>
					</button>
				</td>
			</tr>
		</tbody>
	</table>
</div>

<div id="detalleModal" aria-labelledby="detalleModal" class="modal fade" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Detalles</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<table class="table table-hover">
					<thead>
						<tr>
							<th scope="col">Nombre</th>
							<th scope="col">Cantidad</th>
							<th scope="col">Precio Unidad</th>
							<th scope="col">Subtotal</th>
						</tr>
					</thead>
					<tbody>
						<tr *ngFor="let item of pedido.detalles">
							<td scope="row">{{item.name}}</td>
							<td scope="row">{{item.cantidad}}</td>
							<td scope="row">{{item.precio | currency}}</td>
							<td scope="row">{{(item.precio * item.cantidad) | currency}}</td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>

<div id="usuarioModal" aria-labelledby="usuarioModal" class="modal fade" tabindex="-1" role="dialog">
	<div class="modal-dialog modal-lg" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h5 class="modal-title">Usuario</h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<div>
					<strong>Nombre: </strong>{{pedido.user?.nombre+' '+pedido.user?.apellido}}
				</div>
				<div>
					<strong>Departamento: </strong>{{pedido.user?.departamento.nombre}}
				</div>
				<div>
					<strong>Direccion: </strong>{{pedido.user?.departamento.direccion}}
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
			</div>
		</div>
	</div>
</div>
